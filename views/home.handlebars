<div class="page-header">
  <h1>👥 Usuários Cadastrados</h1>
  <a href="/users/create" class="btn btn-primary">➕ Adicionar Novo Usuário</a>
</div>

<!-- Formulário de busca e filtro -->
<form method="get" action="/" class="search-form">
  <input type="text" name="q" value="{{q}}" placeholder="🔍 Buscar por nome..." />
  <select name="newsletter">
    <option value="">Todos</option>
    <option value="true" {{#if (eq newsletter "true")}}selected{{/if}}>Com newsletter</option>
    <option value="false" {{#if (eq newsletter "false")}}selected{{/if}}>Sem newsletter</option>
  </select>
  <button type="submit">Filtrar</button>
</form>

{{#if users}}
<div class="users-grid">
  {{#each users}}
    <div class="user-card">
      <div class="user-info">
        <h3>{{this.name}}</h3>
        <p class="occupation">💼 {{this.occupation}}</p>
        <p class="newsletter">
          {{#if this.newsletter}}
            📧 Recebe newsletter
          {{else}}
            📭 Não recebe newsletter
          {{/if}}
        </p>
      </div>
      <div class="user-actions">
        <a href="/users/{{this.id}}" class="btn btn-info">👁️ Ver</a>
        <a href="/users/edit/{{this.id}}" class="btn btn-warning">✏️ Editar</a>
        <form action="/users/delete/{{this.id}}" method="POST" class="delete-form">
          <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir este usuário?')">
            🗑️ Excluir
          </button>
        </form>
      </div>
    </div>
  {{/each}}
</div>

<!-- Paginação -->
<div class="pagination">
  {{#each (range 1 totalPages)}}
    <a href="/?page={{this}}{{#if ../q}}&q={{../q}}{{/if}}{{#if ../newsletter}}&newsletter={{../newsletter}}{{/if}}" 
       class="{{#if (eq ../currentPage this)}}active{{/if}}">
      {{this}}
    </a>
  {{/each}}
</div>
{{else}}
<div class="empty-state">
  <h3>😔 Nenhum usuário encontrado</h3>
  <p>Que tal adicionar o primeiro usuário?</p>
  <a href="/users/create" class="btn btn-primary">➕ Cadastrar Primeiro Usuário</a>
</div>
{{/if}}
