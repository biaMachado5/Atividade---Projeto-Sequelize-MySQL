<div class="page-header">
  <h1>ğŸ‘¥ UsuÃ¡rios Cadastrados</h1>
  <a href="/users/create" class="btn btn-primary">â• Adicionar Novo UsuÃ¡rio</a>
</div>

<!-- FormulÃ¡rio de busca e filtro -->
<form method="get" action="/" class="search-form">
  <input type="text" name="q" value="{{q}}" placeholder="ğŸ” Buscar por nome..." />
  <select name="newsletter">
    <option value="">Todos</option>
    <option value="true" {{#if (eq newsletter "true")}}selected{{/if}}>Com newsletter</option>
    <option value="false" {{#if (eq newsletter "false")}}selected{{/if}}>Sem newsletter</option>
  </select>
  <button type="submit">Filtrar</button>
</form>

{{#if users}}
<div class="users-grid">
  {{#each users}}
    <div class="user-card">
      <div class="user-info">
        <h3>{{this.name}}</h3>
        <p class="occupation">ğŸ’¼ {{this.occupation}}</p>
        <p class="newsletter">
          {{#if this.newsletter}}
            ğŸ“§ Recebe newsletter
          {{else}}
            ğŸ“­ NÃ£o recebe newsletter
          {{/if}}
        </p>
      </div>
      <div class="user-actions">
        <a href="/users/{{this.id}}" class="btn btn-info">ğŸ‘ï¸ Ver</a>
        <a href="/users/edit/{{this.id}}" class="btn btn-warning">âœï¸ Editar</a>
        <form action="/users/delete/{{this.id}}" method="POST" class="delete-form">
          <button type="submit" class="btn btn-danger" onclick="return confirm('Tem certeza que deseja excluir este usuÃ¡rio?')">
            ğŸ—‘ï¸ Excluir
          </button>
        </form>
      </div>
    </div>
  {{/each}}
</div>

<!-- PaginaÃ§Ã£o -->
<div class="pagination">
  {{#each (range 1 totalPages)}}
    <a href="/?page={{this}}{{#if ../q}}&q={{../q}}{{/if}}{{#if ../newsletter}}&newsletter={{../newsletter}}{{/if}}" 
       class="{{#if (eq ../currentPage this)}}active{{/if}}">
      {{this}}
    </a>
  {{/each}}
</div>
{{else}}
<div class="empty-state">
  <h3>ğŸ˜” Nenhum usuÃ¡rio encontrado</h3>
  <p>Que tal adicionar o primeiro usuÃ¡rio?</p>
  <a href="/users/create" class="btn btn-primary">â• Cadastrar Primeiro UsuÃ¡rio</a>
</div>
{{/if}}
